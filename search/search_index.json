{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Mastodon S3 Sync Tool [en]","text":"<p>A tool for syncing Mastodon S3 objects.</p>"},{"location":"#usage","title":"Usage","text":""},{"location":"#knowledge","title":"Knowledge","text":"<p>Mastodon has four types of the folder in S3 storages: <code>media_attachments</code>, <code>accounts</code>, <code>custom_emojis</code>, <code>preview_cards</code>. For each type, there is a table in the database to store the file name, file content type, and file remote URL (if the file is cached from remote).</p> <p>In this program, we first read all the records from the database, which should contain all the available files in these four types. And then download them from the source S3 storage, and later upload them into the destination S3 storage.</p> <p>We have four jobs for each of these types of files, and you can run them separately. Each job gets all the records of its type from the database and adds each record as a task into the queue.</p>"},{"location":"#configurations","title":"Configurations","text":"<p>You can use the environment variables to define the config file path, or use the default path <code>private/config.ini</code>. The config file template is <code>private/config.sample.ini</code>. And there is something that need to be explained:</p>"},{"location":"#pgtunnel","title":"<code>pg.tunnel</code>","text":"<p>In most cases, we shouldn't expose the database to the public network, so we use an ssh tunnel to connect to the remote database. But you may not need this if you are running this program on the same remote server. If using a tunnel, you just need to fill in 127.0.0.1 (or any other private network address) in <code>pg.database.host</code>, since we are reaching the database through an ssh tunnel.</p>"},{"location":"#celeryconcurrency","title":"<code>celery.concurrency</code>","text":"<p>We use memory to cache the downloaded temporary files, and the memory will be released later after the task is finished. With Mastodon's default media attachment size limit, up to 150Mb memory will be used for each task (concurrency), and in my personal use case, it takes 53 Mb on average. You can increase the swap space to run with a higher concurrency and avoid OOM. Also, you should consider the network bandwidth and CPU usage. Some S3 storage provider has a rate limit, you may need to set a lower concurrency to avoid being blocked.</p>"},{"location":"#docker","title":"Docker","text":"<p>Requirements:</p> <ul> <li>docker &gt;= 20.10.16</li> <li>docker-compose &gt;= 2.6.0</li> </ul> <pre><code># copy and edit the config file, the default config file is\n# private/config.docker.ini in docker-compose.yml\ncp private/config.sample.ini private/config.docker.ini\n# start the queue (default web UI port 5555)\nmake du\n# add jobs\nmake dj\n\n# Alternatively, you can run the jobs separately:\n# (you can run them in the background, see commented blocks in docker-compose.yml)\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.media_attachments'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.accounts'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.custom_emojis'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.preview_cards'\n</code></pre>"},{"location":"#manually","title":"Manually","text":"<p>Requirements:</p> <ul> <li>python &gt;= 3.9</li> <li>redis &gt;= 6</li> </ul> <pre><code># create virtualenv\nmake virtualenv\n# ** run the command printed above to activate the virtualenv\n# install dependencies\nmake install\n# copy and edit the config file\ncp private/config.sample.ini private/config.ini\n# We use three processes to run the services below, you may \n# need three terminals:\n# 1. start the queue\nmake celery\n# 2. start web UI (default port 5555)\nmake flower\n# 3. add jobs\nmake jobs\n\n# 3. if you want to run the jobs separately:\npython -m s3_sync.jobs.media_attachments\npython -m s3_sync.jobs.accounts\npython -m s3_sync.jobs.custom_emojis\npython -m s3_sync.jobs.preview_cards\n</code></pre>"},{"location":"#logging","title":"Logging","text":"<p>I'm not an expert on the queue library Celery. You can get all its logs through Celery's Web UI - flower, which provides a web interface and REST API to check the logs.</p>"},{"location":"#faq","title":"FAQ","text":""},{"location":"#how-to-continue-the-sync-after-its-interrupted-how-to-limit-the-sync-range","title":"How to continue the sync after it's interrupted? How to limit the sync range?","text":"<p>You can use the <code>--limit</code> option to limit the number of records to be synced. For example, if you want to sync 1000 records, you can run the command below:</p> <pre><code>python -m s3_sync.jobs.media_attachments --limit 1000\n</code></pre> <p>If you want to continue the sync after it's interrupted, you can use the <code>--offset</code> option to skip the first N records. For example, if you want to skip the first 1000 records and continue the sync, you can run the command below:</p> <pre><code>python -m s3_sync.jobs.media_attachments --offset 1000\n</code></pre> <p>It's OK to use both <code>--limit</code> and <code>--offset</code> options at the same time.</p>"},{"location":"#development","title":"Development","text":"<pre><code>python -m s3_sync.jobs.media_attachments --dev --limit 10\npython -m s3_sync.jobs.accounts --dev --limit 10\npython -m s3_sync.jobs.custom_emojis --dev --limit 10\npython -m s3_sync.jobs.preview_cards --dev --limit 10\n</code></pre>"},{"location":"de/","title":"Mastodon S3 synchronisieren tool [de]","text":"<p>Ein Tool zum Synchronisieren von Mastodon S3-Objekten.</p> <p>Dieses Dokument wurde aus der englischen Version von ChatGPT \u00fcbersetzt.</p>"},{"location":"de/#verwendung","title":"Verwendung","text":""},{"location":"de/#kenntnisse","title":"Kenntnisse","text":"<p>Mastodon hat vier Arten von Ordnern in S3-Objekten: <code>media_attachments</code>, <code>accounts</code>, <code>custom_emojis</code>, <code>preview_cards</code>. F\u00fcr jeden Typ gibt es eine Tabelle in der Datenbank, in der der Dateiname, der Dateiinhaltstyp und die URL (sofern Medien zwischengespeichert werden) gespeichert sind.</p> <p>In diesem Programm lesen wir alle Datens\u00e4tze aus der Datenbank, die alle verf\u00fcgbaren Dateien dieser vier Typen enthalten sollten, und laden sie aus dem Quell-S3-Speicher herunter und laden sie dann auf den Ziel-S3-Speicher hoch.</p> <p>Wir haben vier Jobs f\u00fcr diese vier Typen, und Sie k\u00f6nnen sie separat ausf\u00fchren. Jeder Job ruft alle Datens\u00e4tze seines Typs aus der Datenbank ab und f\u00fcgt jeden Datensatz als Aufgabe zur Warteschlange hinzu.</p>"},{"location":"de/#konfiguration","title":"Konfiguration","text":"<p>Sie k\u00f6nnen Umgebungsvariablen verwenden, um den Pfad zur Konfigurationsdatei zu definieren oder den Standardpfad <code>private/config.ini</code> zu verwenden. Die Konfigurationsdateivorlage ist <code>private/config.sample.ini</code>. Und es gibt etwas zu erkl\u00e4ren:</p>"},{"location":"de/#pgtunnel","title":"<code>pg.tunnel</code>","text":"<p>In den meisten F\u00e4llen sollten wir die Datenbank nicht im \u00f6ffentlichen Netzwerk freigeben, daher verwenden wir einen SSH-Tunnel, um uns mit der remote Datenbank zu verbinden. Aber wenn Sie dieses Programm auf demselben Remote-Server ausf\u00fchren, ben\u00f6tigen Sie dies m\u00f6glicherweise nicht. Wenn Sie einen Tunnel verwenden, m\u00fcssen Sie nur localhost in <code>pg.database.host</code> eingeben, da wir auf die Datenbank \u00fcber eine SSH-Verbindung zugreifen.</p>"},{"location":"de/#celeryconcurrency","title":"<code>celery.concurrency</code>","text":"<p>Wir verwenden Speicher, um die heruntergeladenen tempor\u00e4ren Dateien zu puffern, und der Speicher wird nach Abschluss einer Aufgabe freigegeben. Mit Mastodons Standard-Medienanhanggr\u00f6\u00dfenbegrenzung werden f\u00fcr jede Aufgabe (Concurrency) bis zu 150 MB Speicher verwendet, und in meinem pers\u00f6nlichen Anwendungsfall betr\u00e4gt dies durchschnittlich 53 MB. Sie k\u00f6nnen den Swap-Speicher erh\u00f6hen, um mit einer h\u00f6heren Parallelit\u00e4t auszuf\u00fchren und OOM-Fehler zu vermeiden. Sie sollten auch die Netzwerkbandbreite und die CPU-Auslastung ber\u00fccksichtigen. Einige S3-Speicheranbieter haben Rate-Limits. M\u00f6glicherweise m\u00fcssen Sie die Parallelit\u00e4t reduzieren, um zu vermeiden, dass die Aufgaben blockiert werden und fehlschlagen.</p>"},{"location":"de/#docker","title":"Docker","text":"<p>Anforderungen:</p> <ul> <li>docker &gt;= 20.10.16</li> <li>docker-compose &gt;= 2.6.0</li> </ul> <pre><code># Kopieren und Bearbeiten der Konfigurationsdatei, standardm\u00e4\u00dfig befindet sich die Konfigurationsdatei in\n# private/config.docker.ini in docker-compose.yml\ncp private/config.sample.ini private/config.docker.ini\n# start the queue (default web UI port 5555)\nmake du\n# jobs hinzuf\u00fcgen\nmake dj\n\n# Alternativ k\u00f6nnen Sie die Jobs separat ausf\u00fchren:\n# (Sie k\u00f6nnen sie im Hintergrund ausf\u00fchren. Weitere Informationen finden Sie in den auskommentierten Bl\u00f6cken in docker-compose.yml)\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.media_attachments'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.accounts'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.custom_emojis'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.preview_cards'\n</code></pre>"},{"location":"de/#manuell","title":"Manuell","text":"<p>Anforderungen:</p> <ul> <li>python &gt;= 3.9</li> <li>redis &gt;= 6</li> </ul> <pre><code># virtuelle Umgebung erstellen\nmake virtualenv\n# ** f\u00fchren Sie den oben gedruckten Befehl aus, um die virtualenv zu aktivieren.\n# Abh\u00e4ngigkeiten installieren\nmake install\n# Kopieren und Bearbeiten der Konfigurationsdatei\ncp private/config.sample.ini private/config.ini\n# Wir verwenden drei Prozesse, um die folgenden Dienste auszuf\u00fchren. Sie ben\u00f6tigen m\u00f6glicherweise drei Terminals:\n# 1. Queue starten\nmake celery\n# 2. Starten Sie das Web UI (Standardport 5555).\nmake flower\n# 3. jobs hinzuf\u00fcgen\nmake jobs\n\n#3. Wenn Sie die Jobs separat ausf\u00fchren m\u00f6chten:\npython -m s3_sync.jobs.media_attachments\npython -m s3_sync.jobs.accounts\npython -m s3_sync.jobs.custom_emojis\npython -m s3_sync.jobs.preview_cards\n</code></pre>"},{"location":"de/#protokollierung","title":"Protokollierung","text":"<p>Ich bin kein Professor der Queue-Bibliothek Celery, aber Sie k\u00f6nnen alle seine Protokolle \u00fcber Celerys Web-UI - flower erhalten, das eine Web-Schnittstelle und REST-API zum \u00dcberpr\u00fcfen der Protokolle bereitstellt.</p>"},{"location":"de/#entwicklung","title":"Entwicklung","text":"<pre><code>python -m s3_sync.jobs.media_attachments --dev --limit 10\npython -m s3_sync.jobs.accounts --dev --limit 10\npython -m s3_sync.jobs.custom_emojis --dev --limit 10\npython -m s3_sync.jobs.preview_cards --dev --limit 10\n</code></pre>"},{"location":"es/","title":"Herramienta de sincronizaci\u00f3n Mastodon S3 [es]","text":"<p>Una herramienta para la sincronizaci\u00f3n de objetos Mastodon S3.</p> <p>Este documento es una traducci\u00f3n de la versi\u00f3n en ingl\u00e9s realizada por ChatGPT.</p>"},{"location":"es/#uso","title":"Uso","text":""},{"location":"es/#conocimiento","title":"Conocimiento","text":"<p>Mastodon tiene cuatro tipos de carpetas en los objetos S3: <code>media_attachments</code>, <code>accounts</code>, <code>custom_emojis</code>, <code>preview_cards</code>. Para cada tipo, hay una tabla en la base de datos que almacena el nombre del archivo, el tipo de contenido del archivo y la URL remota del archivo (si es un medio remoto en cach\u00e9).</p> <p>En este programa, leemos todos los registros de la base de datos que deben contener todos los archivos disponibles en estos cuatro tipos, y los descargamos del almacenamiento origen de S3, luego los subimos al almacenamiento destino de S3.</p> <p>Tenemos cuatro trabajos para estos cuatro tipos, y puedes ejecutarlos por separado. Cada trabajo obtiene todos los registros de su tipo de la base de datos y agrega cada registro como tarea a la cola.</p>"},{"location":"es/#configuracion","title":"Configuraci\u00f3n","text":"<p>Puedes utilizar las variables de entorno para definir la ruta del archivo de configuraci\u00f3n, o utilizar la ruta predeterminada <code>private/config.ini</code>. La plantilla del archivo de configuraci\u00f3n es <code>private/config.sample.ini</code>. Y hay algo que debemos explicar:</p>"},{"location":"es/#pgtunnel","title":"<code>pg.tunnel</code>","text":"<p>En la mayor\u00eda de los casos, no debemos exponer la base de datos a la red p\u00fablica, as\u00ed que usamos un t\u00fanel ssh para conectarnos a la base de datos remota. pero puede que no necesites esto si est\u00e1s ejecutando este programa en el mismo servidor remoto. Si usas un t\u00fanel, solo necesitas completar <code>localhost</code> en <code>pg.database.host</code>, ya que alcanzamos la base de datos a trav\u00e9s de una conexi\u00f3n ssh.</p>"},{"location":"es/#celeryconcurrency","title":"<code>celery.concurrency</code>","text":"<p>Usamos memoria para almacenar en cach\u00e9 los archivos temporales descargados, y la memoria se liberar\u00e1 despu\u00e9s de que finalice una tarea. Con el l\u00edmite predeterminado del tama\u00f1o de archivo adjunto de medios de Mastodon, se utilizar\u00e1n hasta 150Mb de memoria para cada tarea (concurrencia), y en mi caso de uso personal, tarda un promedio de 53 Mb. Puedes aumentar el espacio de intercambio para ejecutarse con una concurrencia m\u00e1s alta y evitar OOM. Tambi\u00e9n debes considerar el ancho de banda de la red y el uso del CPU. Algunos proveedores de almacenamiento S3 tienen l\u00edmites de tasa, es posible que debas establecer una concurrencia menor para evitar ser bloqueado y luego fallar en las tareas.</p>"},{"location":"es/#docker","title":"Docker","text":"<p>Requisitos:</p> <ul> <li>docker &gt;= 20.10.16</li> <li>docker-compose &gt;= 2.6.0</li> </ul> <pre><code># copie y edite el archivo de configuraci\u00f3n, por defecto el archivo de configuraci\u00f3n es\n# private/config.docker.ini en docker-compose.yml\ncp private/config.sample.ini private/config.docker.ini\n# inicie la cola (puerto UI web predeterminado 5555)\nmake du\n# a\u00f1adir trabajos\nmake dj\n\n# alternativamente, puedes ejecutar los trabajos por separado:\n# (puedes ejecutarlos en segundo plano, mira los bloques comentados en docker-compose.yml)\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.media_attachments'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.accounts'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.custom_emojis'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.preview_cards'\n</code></pre>"},{"location":"es/#manualmente","title":"Manualmente","text":"<p>Requisitos:</p> <ul> <li>python &gt;= 3.9</li> <li>redis &gt;= 6</li> </ul> <pre><code># crear virtualenv\nmake virtualenv\n# ** ejecuta el comando impreso anteriormente para activar el virtualenv\n# instalar dependencias\nmake install\n# copiar y editar archivo de configuraci\u00f3n\ncp private/config.sample.ini private/config.ini\n# Usamos tres procesos para ejecutar los servicios a continuaci\u00f3n, puede\n# que necesites tres terminales:\n# 1. inicie la cola\nmake celery\n# 2. iniciar interfaz web (puerto predeterminado 5555)\nmake flower\n# 3. a\u00f1adir trabajos\nmake jobs\n\n# 3. si deseas ejecutar los trabajos por separado:\npython -m s3_sync.jobs.media_attachments\npython -m s3_sync.jobs.accounts\npython -m s3_sync.jobs.custom_emojis\npython -m s3_sync.jobs.preview_cards\n</code></pre>"},{"location":"es/#registro","title":"Registro","text":"<p>No soy un profesor de la biblioteca de colas Celery, pero puedes obtener todos sus registros a trav\u00e9s de la interfaz web de celery - flower, que proporciona una interfaz web y API REST para verificar los registros.</p>"},{"location":"es/#desarrollo","title":"Desarrollo","text":"<pre><code>python -m s3_sync.jobs.media_attachments --dev --limit 10\npython -m s3_sync.jobs.accounts --dev --limit 10\npython -m s3_sync.jobs.custom_emojis --dev --limit 10\npython -m s3_sync.jobs.preview_cards --dev --limit 10\n</code></pre>"},{"location":"fr/","title":"Outil de synchronisation Mastodon S3 [fr]","text":"<p>Un outil pour synchroniser les objets Mastodon S3.</p> <p>Ce document est traduit \u00e0 partir de la version anglaise par ChatGPT.</p>"},{"location":"fr/#utilisation","title":"Utilisation","text":""},{"location":"fr/#connaissances","title":"Connaissances","text":"<p>Mastodon a quatre types de dossiers dans les objets S3: <code>media_attachments</code>, <code>accounts</code>, <code>custom_emojis</code>, <code>preview_cards</code>. Pour chaque type, il y a une table dans la base de donn\u00e9es pour stocker le nom du fichier, le type de contenu du fichier et l'URL distante du fichier (s'il s'agit de fichiers m\u00e9dias mis en cache \u00e0 distance).</p> <p>Dans ce programme, nous lisons tous les enregistrements de la base de donn\u00e9es qui devraient contenir tous les fichiers disponibles dans ces quatre types, et les t\u00e9l\u00e9chargeons depuis le stockage S3 source, puis les envoyons au stockage S3 de destination.</p> <p>Nous avons quatre emplois pour ces quatre types, et vous pouvez les ex\u00e9cuter s\u00e9par\u00e9ment. Chaque travail r\u00e9cup\u00e8re tous les enregistrements de son type depuis la base de donn\u00e9es, et ajoute chaque enregistrement en tant que t\u00e2che \u00e0 la file d'attente.</p>"},{"location":"fr/#configuration","title":"Configuration","text":"<p>Vous pouvez utiliser les variables d'environnement pour d\u00e9finir le chemin du fichier de configuration, ou utiliser le chemin par d\u00e9faut <code>private/config.ini</code>. Le mod\u00e8le de fichier de configuration est <code>private/config.sample.ini</code>. Et il y a quelque chose qui doit \u00eatre expliqu\u00e9:</p>"},{"location":"fr/#pgtunnel","title":"<code>pg.tunnel</code>","text":"<p>Dans la plupart des cas, nous ne devrions pas exposer la base de donn\u00e9es au r\u00e9seau public, donc nous utilisons un tunnel ssh pour se connecter \u00e0 la base de donn\u00e9es distante. mais cela peut ne pas \u00eatre n\u00e9cessaire si vous ex\u00e9cutez ce programme sur le m\u00eame serveur distant. Si vous utilisez un tunnel, il suffit de remplir localhost dans <code>pg.database.host</code>, car nous acc\u00e9dons \u00e0 la base de donn\u00e9es via une connexion ssh.</p>"},{"location":"fr/#celeryconcurrency","title":"<code>celery.concurrency</code>","text":"<p>Nous utilisons la m\u00e9moire pour mettre en cache les fichiers temporaires t\u00e9l\u00e9charg\u00e9s, et la m\u00e9moire sera lib\u00e9r\u00e9e apr\u00e8s qu'une t\u00e2che est termin\u00e9e. Avec la limite de taille d'attachement multim\u00e9dia par d\u00e9faut de Mastodon, jusqu'\u00e0 150 Mo de m\u00e9moire seront utilis\u00e9s pour chaque t\u00e2che (concurrence), et dans mon cas d'utilisation personnel, cela prend en moyenne 53 Mo. Vous pouvez augmenter l'espace d'\u00e9change pour ex\u00e9cuter avec une concurrence plus \u00e9lev\u00e9e et \u00e9viter les erreurs de type OOM. Vous devriez \u00e9galement tenir compte de la bande passante r\u00e9seau et de l'utilisation du processeur. Certains fournisseurs de stockage S3 ont des limites de d\u00e9bit, vous devrez peut-\u00eatre d\u00e9finir une concurrence inf\u00e9rieure pour \u00e9viter d'\u00eatre bloqu\u00e9 et que les t\u00e2ches \u00e9chouent.</p>"},{"location":"fr/#docker","title":"Docker","text":"<p>Exigences:</p> <ul> <li>docker &gt;= 20.10.16</li> <li>docker-compose &gt;= 2.6.0</li> </ul> <pre><code># copier et modifier le fichier de configuration, par d\u00e9faut le fichier de configuration est\n# private/config.docker.ini in docker-compose.yml\ncp private/config.sample.ini private/config.docker.ini\n# start the queue (default web UI port 5555)\nmake du\n# ajouter des t\u00e2ches\nmake dj\n\n# alternatively, you are able to run the jobs separately:\n# (you can run them in background, see commented blocks in docker-compose.yml)\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.media_attachments'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.accounts'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.custom_emojis'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.preview_cards'\n</code></pre>"},{"location":"fr/#manuellement","title":"Manuellement","text":"<p>Exigences:</p> <ul> <li>python &gt;= 3.9</li> <li>redis &gt;= 6</li> </ul> <pre><code># cr\u00e9er le virtualenv\nmake virtualenv\n# ** ex\u00e9cutez la commande imprim\u00e9e ci-dessus pour activer le virtualenv\n# installer les d\u00e9pendances\nmake install\n# copier et modifier le fichier de configuration\ncp private/config.sample.ini private/config.ini\n# Nous utilisons trois processus pour ex\u00e9cuter les services ci-dessous, vous pouvez\n# besoin de trois terminaux:\n# 1. start the queue\nmake celery\n# 2. star web UI (default port 5555)\nmake flower\n# 3. add jobs\nmake jobs\n\n# 3. si vous voulez ex\u00e9cuter les t\u00e2ches s\u00e9par\u00e9ment:\npython -m s3_sync.jobs.media_attachments\npython -m s3_sync.jobs.accounts\npython -m s3_sync.jobs.custom_emojis\npython -m s3_sync.jobs.preview_cards\n</code></pre>"},{"location":"fr/#logging","title":"Logging","text":"<p>Je ne suis pas un professeur de la biblioth\u00e8que de files d'attente Celery, mais vous pouvez obtenir tous ses journaux via l'interface Web de Celery - flower, qui fournit une interface Web et une API REST pour v\u00e9rifier les journaux.</p>"},{"location":"fr/#developpement","title":"D\u00e9veloppement","text":"<pre><code>python -m s3_sync.jobs.media_attachments --dev --limit 10\npython -m s3_sync.jobs.accounts --dev --limit 10\npython -m s3_sync.jobs.custom_emojis --dev --limit 10\npython -m s3_sync.jobs.preview_cards --dev --limit 10\n</code></pre>"},{"location":"ja/","title":"\u30de\u30b9\u30c8\u30c9\u30f3 S3 \u540c\u671f\u30c4\u30fc\u30eb [ja]","text":"<p>Mastodon S3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u540c\u671f\u3059\u308b\u305f\u3081\u306e\u30c4\u30fc\u30eb\u3067\u3059\u3002</p> <p>\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306fChatGPT\u306b\u3088\u3063\u3066\u82f1\u8a9e\u7248\u304b\u3089\u7ffb\u8a33\u3055\u308c\u307e\u3057\u305f\u3002</p>"},{"location":"ja/#_1","title":"\u4f7f\u7528\u6cd5","text":""},{"location":"ja/#_2","title":"\u77e5\u8b58","text":"<p>Mastodon\u306b\u306f\u3001S3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u5185\u306b4\u7a2e\u985e\u306e\u30d5\u30a9\u30eb\u30c0\u304c\u3042\u308a\u307e\u3059:<code>media_attachments</code> \u3001 <code>accounts</code> \u3001 <code>custom_emojis</code> \u3001<code>preview_cards</code> \u3002 \u305d\u308c\u305e\u308c\u306e\u30bf\u30a4\u30d7\u306b\u5bfe\u3057\u3066\u3001\u30d5\u30a1\u30a4\u30eb\u540d\u3001\u30d5\u30a1\u30a4\u30eb\u30b3\u30f3\u30c6\u30f3\u30c4\u30bf\u30a4\u30d7\u3001\u304a\u3088\u3073\uff08\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u305f\u30ea\u30e2\u30fc\u30c8\u30e1\u30c7\u30a3\u30a2\u306e\u5834\u5408\uff09\u30d5\u30a1\u30a4\u30eb\u30ea\u30e2\u30fc\u30c8URL\u3092\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5185\u306e\u30c6\u30fc\u30d6\u30eb\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u3053\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u306f\u3001\u3053\u308c\u30894\u3064\u306e\u30bf\u30a4\u30d7\u306e\u3059\u3079\u3066\u306e\u5229\u7528\u53ef\u80fd\u306a\u30d5\u30a1\u30a4\u30eb\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u306f\u305a\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304b\u3089\u3059\u3079\u3066\u306e\u30ec\u30b3\u30fc\u30c9\u3092\u8aad\u307f\u53d6\u308a\u3001\u30bd\u30fc\u30b9S3\u30b9\u30c8\u30ec\u30fc\u30b8\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u305d\u308c\u3089\u3092\u5b9b\u5148S3\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002</p> <p>\u3053\u308c\u30894\u3064\u306e\u30bf\u30a4\u30d7\u306b\u306f4\u3064\u306e\u30b8\u30e7\u30d6\u304c\u3042\u308a\u3001\u305d\u308c\u305e\u308c\u3092\u500b\u5225\u306b\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\u5404\u30b8\u30e7\u30d6\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304b\u3089\u305d\u306e\u30bf\u30a4\u30d7\u306e\u3059\u3079\u3066\u306e\u30ec\u30b3\u30fc\u30c9\u3092\u53d6\u5f97\u3057\u3001\u305d\u308c\u305e\u308c\u306e\u30ec\u30b3\u30fc\u30c9\u3092\u30ad\u30e5\u30fc\u306e\u30bf\u30b9\u30af\u3068\u3057\u3066\u8ffd\u52a0\u3057\u307e\u3059\u3002</p>"},{"location":"ja/#config","title":"Config","text":"<p>\u74b0\u5883\u5909\u6570\u3092\u4f7f\u7528\u3057\u3066\u69cb\u6210\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u304b\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u30d1\u30b9\u3067\u3042\u308b <code>private/config.ini</code> \u3092\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002 \u69cb\u6210\u30d5\u30a1\u30a4\u30eb\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f<code>private/config.sample.ini</code>\u3067\u3059\u3002 \u8aac\u660e\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3082\u306e\u304c\u3042\u308a\u307e\u3059\uff1a</p>"},{"location":"ja/#pgtunnel","title":"<code>pg.tunnel</code>","text":"<p>\u307b\u3068\u3093\u3069\u306e\u5834\u5408\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u30d1\u30d6\u30ea\u30c3\u30af\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u516c\u958b\u3059\u3079\u304d\u3067\u306f\u306a\u3044\u305f\u3081\u3001\u30ea\u30e2\u30fc\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u63a5\u7d9a\u3059\u308b\u306b\u306fssh\u30c8\u30f3\u30cd\u30eb\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002 \u305f\u3060\u3057\u3001\u3053\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u540c\u3058\u30ea\u30e2\u30fc\u30c8\u30b5\u30fc\u30d0\u30fc\u3067\u5b9f\u884c\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u3053\u308c\u306f\u5fc5\u8981\u3042\u308a\u307e\u305b\u3093\u3002 \u30c8\u30f3\u30cd\u30eb\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306f\u3001<code>pg.database.host</code>\u306blocalhost\u3092\u8a18\u5165\u3059\u308b\u3060\u3051\u3067\u3088\u304f\u3001ssh\u63a5\u7d9a\u3092\u4ecb\u3057\u3066\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u5230\u9054\u3059\u308b\u305f\u3081\u3067\u3059\u3002</p>"},{"location":"ja/#celeryconcurrency","title":"<code>celery.concurrency</code>","text":"<p>\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u4e00\u6642\u7684\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u3059\u308b\u305f\u3081\u306b\u30e1\u30e2\u30ea\u3092\u4f7f\u7528\u3057\u3001\u30e1\u30e2\u30ea\u306f1\u3064\u306e\u30bf\u30b9\u30af\u304c\u7d42\u4e86\u3059\u308b\u3068\u89e3\u653e\u3055\u308c\u307e\u3059\u3002 Mastodon\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30e1\u30c7\u30a3\u30a2\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u5236\u9650\u306b\u3088\u308a\u30011\u3064\u306e\u30bf\u30b9\u30af\uff08\u4e26\u884c\u6027\uff09\u3054\u3068\u306b\u6700\u5927150Mb\u306e\u30e1\u30e2\u30ea\u304c\u4f7f\u7528\u3055\u308c\u3001\u79c1\u306e\u500b\u4eba\u7684\u306a\u4f7f\u7528\u4f8b\u3067\u306f\u5e73\u5747\u306753 Mb\u304b\u304b\u308a\u307e\u3059\u3002 \u30b9\u30ef\u30c3\u30d7\u30b9\u30da\u30fc\u30b9\u3092\u5897\u3084\u3057\u3066\u3001\u3088\u308a\u9ad8\u3044\u4e26\u5217\u51e6\u7406\u3067\u5b9f\u884c\u3057\u3001OOM\u3092\u56de\u907f\u3057\u307e\u3057\u3087\u3046\u3002 \u307e\u305f\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5e2f\u57df\u5e45\u3068CPU\u4f7f\u7528\u7387\u3082\u8003\u616e\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u4e00\u90e8\u306eS3\u30b9\u30c8\u30ec\u30fc\u30b8\u30d7\u30ed\u30d0\u30a4\u30c0\u306b\u306f\u30ec\u30fc\u30c8\u5236\u9650\u304c\u3042\u308b\u305f\u3081\u3001\u30d6\u30ed\u30c3\u30af\u3055\u308c\u3066\u30bf\u30b9\u30af\u304c\u5931\u6557\u3057\u306a\u3044\u3088\u3046\u306b\u3001\u3088\u308a\u4f4e\u3044\u4e26\u884c\u6027\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"ja/#docker","title":"Docker","text":"<p>\u8981\u4ef6\uff1a</p> <ul> <li>docker &gt;= 20.10.16</li> <li>docker-compose &gt;= 2.6.0</li> </ul> <pre><code># config\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u3066\u7de8\u96c6\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306econfig\u30d5\u30a1\u30a4\u30eb\u306f\u3001\n# docker-compose.yml\u5185\u306eprivate/config.docker.ini\u3067\u3059\u3002\ncp private/config.sample.ini private/config.docker.ini\n# \u30ad\u30e5\u30fc\u3092\u958b\u59cb\u3057\u307e\u3059\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u306eWeb UI\u30dd\u30fc\u30c85555\uff09\nmake du\n# \u30b8\u30e7\u30d6\u3092\u8ffd\u52a0\u3057\u307e\u3059\nmake dj\n\n# \u4ee3\u308f\u308a\u306b\u3001\u30b8\u30e7\u30d6\u3092\u500b\u5225\u306b\u5b9f\u884c\u3067\u304d\u307e\u3059\uff1a\n# \uff08\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002docker-compose.yml\u306e\u30b3\u30e1\u30f3\u30c8\u3055\u308c\u305f\u30d6\u30ed\u30c3\u30af\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\uff09\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.media_attachments'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.accounts'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.custom_emojis'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.preview_cards'\n</code></pre>"},{"location":"ja/#_3","title":"\u624b\u52d5","text":"<p>\u8981\u4ef6\uff1a</p> <ul> <li>python &gt;= 3.9</li> <li>redis &gt;= 6</li> </ul> <pre><code># virtualenv\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nmake virtualenv\n# ** \u4eee\u60f3\u74b0\u5883\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f\u3001\u4e0a\u8a18\u3067\u8868\u793a\u3055\u308c\u305f\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n# \u4f9d\u5b58\u95a2\u4fc2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\nmake install\n# config\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u3066\u7de8\u96c6\u3057\u307e\u3059\ncp private/config.sample.ini private/config.ini\n# \u4ee5\u4e0b\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b3\u3064\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u3042\u306a\u305f\u306f\u5fc5\u8981\u304b\u3082\u3057\u308c\u307e\u305b\u3093\n# \u4e09\u3064\u306e\u30bf\u30fc\u30df\u30ca\u30eb\uff1a\n# 1. \u30ad\u30e5\u30fc\u3092\u958b\u59cb\u3059\u308b\nmake celery\n# 2. Web UI\u3092\u958b\u59cb\u3059\u308b\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u30dd\u30fc\u30c85555\uff09\nmake flower\n# 3. \u30b8\u30e7\u30d6\u3092\u8ffd\u52a0\u3057\u307e\u3059\nmake jobs\n\n# 3.\u30b8\u30e7\u30d6\u3092\u500b\u5225\u306b\u5b9f\u884c\u3057\u305f\u3044\u5834\u5408\uff1a\npython -m s3_sync.jobs.media_attachments\npython -m s3_sync.jobs.accounts\npython -m s3_sync.jobs.custom_emojis\npython -m s3_sync.jobs.preview_cards\n</code></pre>"},{"location":"ja/#_4","title":"\u30ed\u30ae\u30f3\u30b0","text":"<p>\u79c1\u306f\u30ad\u30e5\u30fc\u30e9\u30a4\u30d6\u30e9\u30eaCelery\u306e\u6559\u6388\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001Celery\u306eWeb UI-flower\u3092\u4ecb\u3057\u3066\u3059\u3079\u3066\u306e\u30ed\u30b0\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\u30d5\u30e9\u30ef\u30fc\u306f\u3001\u30ed\u30b0\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306eWeb\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3068REST API\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p>"},{"location":"ja/#_5","title":"\u958b\u767a","text":"<pre><code>python -m s3_sync.jobs.media_attachments --dev --limit 10\npython -m s3_sync.jobs.accounts --dev --limit 10\npython -m s3_sync.jobs.custom_emojis --dev --limit 10\npython -m s3_sync.jobs.preview_cards --dev --limit 10\n</code></pre>"},{"location":"ru/","title":"\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442 \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0430\u0446\u0438\u0438 Mastodon S3 [ru]","text":"<p>\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442 \u0434\u043b\u044f \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0430\u0446\u0438\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 Mastodon S3.</p> <p>\u042d\u0442\u043e\u0442 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u043f\u0435\u0440\u0435\u0432\u0435\u0434\u0435\u043d \u0441 \u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u043e\u0439 \u0432\u0435\u0440\u0441\u0438\u0438 ChatGPT.</p>"},{"location":"ru/#_1","title":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435","text":""},{"location":"ru/#_2","title":"\u0417\u043d\u0430\u043d\u0438\u044f","text":"<p>Mastodon \u0438\u043c\u0435\u0435\u0442 \u0447\u0435\u0442\u044b\u0440\u0435 \u0442\u0438\u043f\u0430 \u043f\u0430\u043f\u043e\u043a \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0430\u0445 S3: <code>media_attachments</code>, <code>accounts</code>, <code>custom_emojis</code>, <code>preview_cards</code>. \u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0442\u0438\u043f\u0430 \u0435\u0441\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0445, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0445\u0440\u0430\u043d\u0438\u0442 \u0438\u043c\u044f \u0444\u0430\u0439\u043b\u0430, \u0442\u0438\u043f \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430 \u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0439 URL-\u0430\u0434\u0440\u0435\u0441 \u0444\u0430\u0439\u043b\u0430 (\u0435\u0441\u043b\u0438 \u044d\u0442\u043e \u043a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b).</p> <p>\u0412 \u044d\u0442\u043e\u0439 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0435 \u043c\u044b \u0447\u0438\u0442\u0430\u0435\u043c \u0432\u0441\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0438\u0437 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0434\u043e\u043b\u0436\u043d\u044b \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0432\u0441\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b \u044d\u0442\u0438\u0445 \u0447\u0435\u0442\u044b\u0440\u0435\u0445 \u0442\u0438\u043f\u043e\u0432, \u0438 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0438\u0445 \u0438\u0437 \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0433\u043e \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 S3, \u0430 \u0437\u0430\u0442\u0435\u043c \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0438\u0445 \u0432 \u0446\u0435\u043b\u0435\u0432\u043e\u0435 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 S3.</p> <p>\u0423 \u043d\u0430\u0441 \u0435\u0441\u0442\u044c \u0447\u0435\u0442\u044b\u0440\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u044d\u0442\u0438\u0445 \u0447\u0435\u0442\u044b\u0440\u0435\u0445 \u0442\u0438\u043f\u043e\u0432, \u0438 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u0438\u0445 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e. \u041a\u0430\u0436\u0434\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0432\u0441\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0441\u0432\u043e\u0435\u0433\u043e \u0442\u0438\u043f\u0430 \u0438\u0437 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 \u043a\u0430\u0436\u0434\u0443\u044e \u0437\u0430\u043f\u0438\u0441\u044c \u043a\u0430\u043a \u0437\u0430\u0434\u0430\u043d\u0438\u0435 \u0432 \u043e\u0447\u0435\u0440\u0435\u0434\u044c.</p>"},{"location":"ru/#_3","title":"\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f","text":"<p>\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043f\u0443\u0442\u044c \u043a \u0444\u0430\u0439\u043b\u0443 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0438\u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u0443\u0442\u044c \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u2014 <code>private/config.ini</code>. \u041e\u0431\u0440\u0430\u0437\u0435\u0446 \u0444\u0430\u0439\u043b\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 <code>private/config.sample.ini</code>. \u0418 \u0447\u0442\u043e-\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u043e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c:</p>"},{"location":"ru/#pgtunnel","title":"<code>pg.tunnel</code>","text":"<p>\u0412 \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0435 \u0441\u043b\u0443\u0447\u0430\u0435\u0432 \u043c\u044b \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u044b \u0440\u0430\u0441\u043a\u0440\u044b\u0432\u0430\u0442\u044c \u0431\u0430\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 \u043e\u0431\u0449\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0439 \u0441\u0435\u0442\u0438, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043c\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c ssh-\u0442\u0443\u043d\u043d\u0435\u043b\u044c \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u043e\u0439 \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0445. \u041d\u043e \u0432\u0430\u043c \u043c\u043e\u0436\u0435\u0442 \u043d\u0435 \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u0438\u0442\u044c\u0441\u044f \u044d\u0442\u043e, \u0435\u0441\u043b\u0438 \u0432\u044b \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0435 \u044d\u0442\u0443 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0443 \u043d\u0430 \u0442\u043e\u043c \u0436\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u043e\u043c \u0441\u0435\u0440\u0432\u0435\u0440\u0435. \u0415\u0441\u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0442\u0443\u043d\u043d\u0435\u043b\u044c, \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c localhost \u0432 <code>pg.database.host</code>, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043c\u044b \u0441\u0432\u044f\u0437\u044b\u0432\u0430\u0435\u043c\u0441\u044f \u0441 \u0431\u0430\u0437\u043e\u0439 \u0434\u0430\u043d\u043d\u044b\u0445 \u0447\u0435\u0440\u0435\u0437 ssh-\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435.</p>"},{"location":"ru/#celeryconcurrency","title":"<code>celery.concurrency</code>","text":"<p>\u041c\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c \u043f\u0430\u043c\u044f\u0442\u044c \u0434\u043b\u044f \u043a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432, \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0445 \u0438\u0437 S3, \u0438 \u043f\u0430\u043c\u044f\u0442\u044c \u0431\u0443\u0434\u0435\u0442 \u043e\u0441\u0432\u043e\u0431\u043e\u0436\u0434\u0430\u0442\u044c\u0441\u044f \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0437\u0430\u0434\u0430\u0447\u0438. \u0421 \u0443\u0447\u0435\u0442\u043e\u043c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0439 \u043c\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043b\u043e\u0432 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432 Mastodon, \u043d\u0430 \u043a\u0430\u0436\u0434\u0443\u044e \u0437\u0430\u0434\u0430\u0447\u0443 (\u043a\u043e\u043d\u043a\u0443\u0440\u0435\u043d\u0442\u043d\u043e\u0441\u0442\u044c) \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u043e \u0434\u043e 150 \u041c\u0431 \u043f\u0430\u043c\u044f\u0442\u0438, \u0430 \u0432 \u043c\u043e\u0435\u043c \u043b\u0438\u0447\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0432 \u0441\u0440\u0435\u0434\u043d\u0435\u043c \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f 53 \u041c\u0431. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c \u0440\u0430\u0437\u0434\u0435\u043b \u043f\u043e\u0434\u043a\u0430\u0447\u043a\u0438, \u0447\u0442\u043e\u0431\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441 \u0431\u043e\u043b\u0435\u0435 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u043a\u043e\u043d\u043a\u0443\u0440\u0435\u043d\u0442\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u043e\u0448\u0438\u0431\u043e\u043a OOM. \u0422\u0430\u043a\u0436\u0435 \u0441\u0442\u043e\u0438\u0442 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u043d\u0443\u044e \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u044c \u0441\u0435\u0442\u0438 \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0430. \u041d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440\u044b \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449 S3 \u0438\u043c\u0435\u044e\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u043d\u0430 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c, \u0432\u0430\u043c \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0442\u0440\u0435\u0431\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0431\u043e\u043b\u0435\u0435 \u043d\u0438\u0437\u043a\u0443\u044e \u043a\u043e\u043d\u043a\u0443\u0440\u0435\u043d\u0442\u043d\u043e\u0441\u0442\u044c, \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438 \u0438 \u0441\u0431\u043e\u0435\u0432 \u0437\u0430\u0434\u0430\u0447.</p>"},{"location":"ru/#docker","title":"Docker","text":"<p>\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f:</p> <ul> <li>docker &gt;= 20.10.16</li> <li>docker-compose &gt;= 2.6.0</li> </ul> <pre><code># \u0441\u043a\u043e\u043f\u0438\u0440\u0443\u0439\u0442\u0435 \u0438 \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0444\u0430\u0439\u043b \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438; \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0444\u0430\u0439\u043b \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \n# private/config.docker.ini \u0432 docker-compose.yml\ncp private/config.sample.ini private/config.docker.ini\n# start the queue (default web UI port 5555)\nmake du\n# add jobs\nmake dj\n\n# \u0438\u043b\u0438 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u043d\u0438\u044f \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e:\n# (\u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0432 \u0444\u043e\u043d\u043e\u0432\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435, \u0441\u043c. \u0437\u0430\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0431\u043b\u043e\u043a\u0438 \u0432 docker-compose.yml)\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.media_attachments'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.accounts'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.custom_emojis'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.preview_cards'\n</code></pre>"},{"location":"ru/#_4","title":"\u0420\u0443\u0447\u043d\u043e\u0439","text":"<p>\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f:</p> <ul> <li>python &gt;= 3.9</li> <li>redis &gt;= 6</li> </ul> <pre><code># create virtualenv\nmake virtualenv\n# ** run the command printed above to activate the virtualenv\n# install dependencies\nmake install\n# copy and edit config file\ncp private/config.sample.ini private/config.ini\n# We use three processes to run the services below, you may \n# need three terminals:\n# 1. start the queue\nmake celery\n# 2. start web UI (default port 5555)\nmake flower\n# 3. add jobs\nmake jobs\n\n# 3. if you want to run the jobs separately:\npython -m s3_sync.jobs.media_attachments\npython -m s3_sync.jobs.accounts\npython -m s3_sync.jobs.custom_emojis\npython -m s3_sync.jobs.preview_cards\n</code></pre>"},{"location":"ru/#_5","title":"\u0416\u0443\u0440\u043d\u0430\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":"<p>\u042f \u043d\u0435 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u043e\u0440 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439 Celery, \u043d\u043e \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0432\u0441\u0435 \u0435\u0435 \u0436\u0443\u0440\u043d\u0430\u043b\u044b \u0447\u0435\u0440\u0435\u0437 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u0432\u0435\u0431-UI - flower, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0432\u0435\u0431-\u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u0438 REST-API \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0436\u0443\u0440\u043d\u0430\u043b\u043e\u0432.</p>"},{"location":"ru/#development","title":"Development","text":"<pre><code>python -m s3_sync.jobs.media_attachments --dev --limit 10\npython -m s3_sync.jobs.accounts --dev --limit 10\npython -m s3_sync.jobs.custom_emojis --dev --limit 10\npython -m s3_sync.jobs.preview_cards --dev --limit 10\n</code></pre>"},{"location":"zh/","title":"Mastodon S3\u540c\u6b65\u5de5\u5177 [zh]","text":"<p>\u4e00\u4e2a\u7528\u4e8e\u540c\u6b65Mastodon S3\u5bf9\u8c61\u7684\u5de5\u5177\u3002</p> <p>\u672c\u6587\u6863\u7531 ChatGPT \u7ffb\u8bd1\u81ea\u82f1\u6587\u6587\u6863</p>"},{"location":"zh/#_1","title":"\u7528\u9014","text":""},{"location":"zh/#_2","title":"\u77e5\u8bc6","text":"<p>Mastodon\u5728S3\u5b58\u50a8\u4e2d\u6709\u56db\u79cd\u7c7b\u578b\u7684\u6587\u4ef6\u5939\uff1a<code>media_attachments</code>\uff0c<code>accounts</code>\uff0c<code>custom_emojis</code>\uff0c<code>preview_cards</code>\u3002\u5bf9\u4e8e\u6bcf\u4e00\u79cd\u7c7b\u578b\uff0c\u6570\u636e\u5e93\u4e2d\u90fd\u6709\u4e00\u4e2a\u8868\u6765\u5b58\u50a8\u6587\u4ef6\u540d\u3001\u6587\u4ef6\u5185\u5bb9\u7c7b\u578b\u4ee5\u53ca\u6587\u4ef6\u8fdc\u7a0bURL\uff08\u5982\u679c\u6587\u4ef6\u88ab\u4ece\u8fdc\u7a0b\u7f13\u5b58\uff09\u3002</p> <p>\u5728\u8fd9\u4e2a\u7a0b\u5e8f\u4e2d\uff0c\u9996\u5148\u6211\u4eec\u4ece\u6570\u636e\u5e93\u8bfb\u53d6\u6240\u6709\u8bb0\u5f55\uff0c\u8fd9\u4e9b\u8bb0\u5f55\u5e94\u8be5\u5305\u542b\u8fd9\u56db\u79cd\u7c7b\u578b\u7684\u6240\u6709\u53ef\u7528\u6587\u4ef6\u3002\u7136\u540e\u4ece\u6e90S3\u5b58\u50a8\u4e0b\u8f7d\u5b83\u4eec\uff0c\u6700\u540e\u4e0a\u4f20\u5230\u76ee\u6807S3\u5b58\u50a8\u3002</p> <p>\u6211\u4eec\u4e3a\u6bcf\u79cd\u7c7b\u578b\u7684\u6587\u4ef6\u63d0\u4f9b\u4e86\u56db\u4e2a\u4f5c\u4e1a\uff0c\u60a8\u53ef\u4ee5\u5355\u72ec\u8fd0\u884c\u5b83\u4eec\u3002\u6bcf\u4e2a\u4f5c\u4e1a\u4ece\u6570\u636e\u5e93\u4e2d\u83b7\u53d6\u5176\u7c7b\u578b\u7684\u6240\u6709\u8bb0\u5f55\uff0c\u5e76\u5c06\u6bcf\u4e2a\u8bb0\u5f55\u6dfb\u52a0\u5230\u961f\u5217\u4e2d\u4f5c\u4e3a\u4efb\u52a1\u3002</p>"},{"location":"zh/#_3","title":"\u914d\u7f6e","text":"<p>\u60a8\u53ef\u4ee5\u4f7f\u7528\u73af\u5883\u53d8\u91cf\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u6216\u8005\u4f7f\u7528\u9ed8\u8ba4\u8def\u5f84<code>private/config.ini</code>\u3002\u914d\u7f6e\u6587\u4ef6\u6a21\u677f\u662f<code>private/config.sample.ini</code>\u3002\u6709\u4e00\u4e9b\u9700\u8981\u89e3\u91ca\u7684\u5185\u5bb9\uff1a</p>"},{"location":"zh/#pgtunnel","title":"<code>pg.tunnel</code>","text":"<p>\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4e0d\u5e94\u8be5\u5c06\u6570\u636e\u5e93\u66b4\u9732\u5728\u516c\u5171\u7f51\u7edc\u4e2d\uff0c\u6240\u4ee5\u6211\u4eec\u4f7f\u7528ssh\u96a7\u9053\u8fde\u63a5\u5230\u8fdc\u7a0b\u6570\u636e\u5e93\u3002\u4f46\u662f\uff0c\u5982\u679c\u60a8\u5728\u540c\u4e00\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u6b64\u7a0b\u5e8f\uff0c\u5219\u53ef\u80fd\u4e0d\u9700\u8981\u6b64\u9009\u9879\u3002\u5982\u679c\u4f7f\u7528\u96a7\u9053\uff0c\u5219\u53ea\u9700\u5728<code>pg.database.host</code>\u4e2d\u586b\u5199127.0.0.1\uff08\u6216\u4efb\u4f55\u5176\u4ed6\u79c1\u6709\u7f51\u7edc\u5730\u5740\uff09\uff0c\u56e0\u4e3a\u6211\u4eec\u662f\u901a\u8fc7ssh\u96a7\u9053\u5230\u8fbe\u6570\u636e\u5e93\u7684\u3002</p>"},{"location":"zh/#celeryconcurrency","title":"<code>celery.concurrency</code>","text":"<p>\u6211\u4eec\u4f7f\u7528\u5185\u5b58\u7f13\u5b58\u5df2\u4e0b\u8f7d\u7684\u4e34\u65f6\u6587\u4ef6\uff0c\u4efb\u52a1\u5b8c\u6210\u540e\u5185\u5b58\u5c06\u88ab\u91ca\u653e\u3002\u6839\u636eMastodon\u7684\u9ed8\u8ba4\u5a92\u4f53\u9644\u4ef6\u5927\u5c0f\u9650\u5236\uff0c\u6bcf\u4e2a\u4efb\u52a1\uff08\u5e76\u53d1\uff09\u6700\u591a\u4f7f\u7528150Mb\u5185\u5b58\uff0c\u5728\u6211\u7684\u4e2a\u4eba\u7528\u4f8b\u4e2d\uff0c\u5e73\u5747\u9700\u898153 Mb\u3002\u60a8\u53ef\u4ee5\u589e\u52a0swap\u7a7a\u95f4\u4ee5\u4f7f\u7528\u66f4\u9ad8\u7684\u5e76\u53d1\u6027\u5e76\u907f\u514dOOM\u3002\u6b64\u5916\uff0c\u60a8\u8fd8\u5e94\u8003\u8651\u7f51\u7edc\u5e26\u5bbd\u548cCPU\u4f7f\u7528\u7387\u3002\u67d0\u4e9bS3\u5b58\u50a8\u63d0\u4f9b\u8005\u6709\u901f\u7387\u9650\u5236\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u8bbe\u7f6e\u8f83\u4f4e\u7684\u5e76\u53d1\u6027\u4ee5\u907f\u514d\u88ab\u963b\u6b62\u3002</p>"},{"location":"zh/#docker","title":"Docker","text":"<p>\u8981\u6c42\uff1a</p> <ul> <li>docker&gt;=20.10.16</li> <li>docker-compose &gt;= 2.6.0</li> </ul> <pre><code>#\u590d\u5236\u5e76\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\uff0c\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e\n#private/config.docker.ini in docker-compose.yml\ncp private/config.sample.ini private/config.docker.ini\n\n#\u542f\u52a8\u961f\u5217\uff08\u9ed8\u8ba4web UI\u7aef\u53e35555\uff09\nmake du\n#\u6dfb\u52a0\u4f5c\u4e1a\nmake dj\n\n#\u60a8\u4e5f\u53ef\u4ee5\u5355\u72ec\u8fd0\u884c\u4f5c\u4e1a\uff1a\n#\uff08\u60a8\u53ef\u4ee5\u5728\u540e\u53f0\u8fd0\u884c\u5b83\u4eec\uff0c\u8bf7\u53c2\u89c1docker-compose.yml\u4e2d\u7684\u6ce8\u91ca\u5757\uff09\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.media_attachments'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.accounts'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.custom_emojis'\ndocker compose exec celery sh -c 'python -m s3_sync.jobs.preview_cards'\n</code></pre>"},{"location":"zh/#_4","title":"\u624b\u52a8","text":"<p>\u8981\u6c42\uff1a</p> <ul> <li>python&gt;=3.9</li> <li>redis&gt;=6</li> </ul> <pre><code>#\u521b\u5efa\u865a\u62df\u73af\u5883\nmake virtualenv\n# **\u8fd0\u884c\u4e0a\u9762\u6253\u5370\u7684\u547d\u4ee4\u6765\u6fc0\u6d3b\u865a\u62df\u73af\u5883**\n#\u5b89\u88c5\u4f9d\u8d56\u9879\nmake install\n#\u590d\u5236\u5e76\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\ncp private/config.sample.ini private/config.ini\n#\u6211\u4eec\u4f7f\u7528\u4e09\u4e2a\u8fdb\u7a0b\u8fd0\u884c\u4e0b\u9762\u7684\u670d\u52a1\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u4e09\u4e2a\u7ec8\u7aef\uff1a\n# 1. \u542f\u52a8\u961f\u5217\nmake celery\n# 2. \u542f\u52a8web UI\uff08\u9ed8\u8ba4\u7aef\u53e35555\uff09\nmake flower\n# 3.\u6dfb\u52a0\u4f5c\u4e1a\nmake jobs\n\n# 3.\u5982\u679c\u60a8\u60f3\u5206\u522b\u8fd0\u884c\u4f5c\u4e1a\uff1a\npython -m s3_sync.jobs.media_attachments\npython -m s3_sync.jobs.accounts\npython -m s3_sync.jobs.custom_emojis\npython -m s3_sync.jobs.preview_cards\n</code></pre>"},{"location":"zh/#_5","title":"\u65e5\u5fd7","text":"<p>\u6211\u4e0d\u662fCelery\u961f\u5217\u5e93\u7684\u4e13\u5bb6\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7Celery\u7684Web UI-Flower\u83b7\u53d6\u5176\u6240\u6709\u65e5\u5fd7\uff0cFlower\u63d0\u4f9b\u4e86Web\u754c\u9762\u548cREST API\u4ee5\u68c0\u67e5\u65e5\u5fd7\u3002</p>"},{"location":"zh/#_6","title":"\u5e38\u89c1\u95ee\u9898\u89e3\u7b54","text":""},{"location":"zh/#_7","title":"\u600e\u6837\u5728\u540c\u6b65\u88ab\u4e2d\u65ad\u540e\u7ee7\u7eed\u540c\u6b65\uff1f\u5982\u4f55\u9650\u5236\u540c\u6b65\u8303\u56f4\uff1f","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>--limit</code> \u9009\u9879\u6765\u9650\u5236\u540c\u6b65\u8bb0\u5f55\u7684\u6570\u91cf\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u60f3\u540c\u6b651000\u6761\u8bb0\u5f55\uff0c\u53ef\u4ee5\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>python -m s3_sync.jobs.media_attachments --limit 1000\n</code></pre> <p>\u5982\u679c\u4f60\u60f3\u5728\u540c\u6b65\u4e2d\u65ad\u540e\u7ee7\u7eed\u540c\u6b65\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>--offset</code> \u9009\u9879\u6765\u8df3\u8fc7\u524dN\u6761\u8bb0\u5f55\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u60f3\u8df3\u8fc7\u524d1000\u6761\u8bb0\u5f55\u5e76\u7ee7\u7eed\u540c\u6b65\uff0c\u53ef\u4ee5\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>python -m s3_sync.jobs.media_attachments --offset 1000\n</code></pre> <p>\u540c\u65f6\u4f7f\u7528 <code>--limit</code> \u548c <code>--offset</code> \u9009\u9879\u4e5f\u662f\u53ef\u4ee5\u7684\u3002</p>"},{"location":"zh/#_8","title":"\u5f00\u53d1","text":"<pre><code>python -m s3_sync.jobs.media_attachments --dev --limit 10\npython -m s3_sync.jobs.accounts --dev --limit 10\npython -m s3_sync.jobs.custom_emojis --dev --limit 10\npython -m s3_sync.jobs.preview_cards --dev --limit 10\n</code></pre>"}]}